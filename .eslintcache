[{"/Users/vadykk/Desktop/edu/swapi/src/index.js":"1","/Users/vadykk/Desktop/edu/swapi/src/reportWebVitals.js":"2","/Users/vadykk/Desktop/edu/swapi/src/App.js":"3","/Users/vadykk/Desktop/edu/swapi/src/api.js":"4","/Users/vadykk/Desktop/edu/swapi/src/components/PersonCard.js":"5","/Users/vadykk/Desktop/edu/swapi/src/firebase.js":"6","/Users/vadykk/Desktop/edu/swapi/src/components/Search.js":"7","/Users/vadykk/Desktop/edu/swapi/src/components/Nav.js":"8","/Users/vadykk/Desktop/edu/swapi/src/components/GlobalStyles.js":"9","/Users/vadykk/Desktop/edu/swapi/src/components/MyHeroes.js":"10"},{"size":500,"mtime":1611778251594,"results":"11","hashOfConfig":"12"},{"size":362,"mtime":1611778251596,"results":"13","hashOfConfig":"12"},{"size":2095,"mtime":1612190608427,"results":"14","hashOfConfig":"12"},{"size":117,"mtime":1611842872603,"results":"15","hashOfConfig":"12"},{"size":7286,"mtime":1612221881726,"results":"16","hashOfConfig":"12"},{"size":546,"mtime":1612030798696,"results":"17","hashOfConfig":"12"},{"size":4510,"mtime":1612208541824,"results":"18","hashOfConfig":"12"},{"size":2033,"mtime":1612190251135,"results":"19","hashOfConfig":"12"},{"size":352,"mtime":1612125388219,"results":"20","hashOfConfig":"12"},{"size":1335,"mtime":1612191180356,"results":"21","hashOfConfig":"12"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},"1q2usm",{"filePath":"25","messages":"26","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"27","messages":"28","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"29","usedDeprecatedRules":"24"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"38","usedDeprecatedRules":"24"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"41","usedDeprecatedRules":"24"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},"/Users/vadykk/Desktop/edu/swapi/src/index.js",[],["46","47"],"/Users/vadykk/Desktop/edu/swapi/src/reportWebVitals.js",[],"/Users/vadykk/Desktop/edu/swapi/src/App.js",["48"],"import React, { useState, useEffect } from \"react\";\n\nimport GlobalStyles from \"./components/GlobalStyles\";\nimport Nav from \"./components/Nav\";\nimport Search from \"./components/Search\";\n\nimport \"./App.css\";\nimport axios from \"axios\";\nimport styled from \"styled-components\";\nimport { auth } from \"./firebase\";\nimport firebase from \"firebase\";\n\nfunction App() {\n  const [allPeople, setAllPeople] = useState(\"\");\n\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [user, setUser] = useState(\"\");\n\n  useEffect(() => {\n    let people = [];\n    axios\n      .get(\"https://swapi.dev/api/people/\")\n      .then((response) => {\n        people = response.data.results;\n        return response.data.count;\n      })\n      .then((count) => {\n        const numberOfPagesLeft = Math.ceil((count - 1) / 10);\n        let promises = [];\n\n        for (let i = 2; i <= numberOfPagesLeft; i++) {\n          promises.push(axios(`https://swapi.dev/api/people?page=${i}`));\n        }\n        return Promise.all(promises);\n      })\n      .then((response) => {\n        people = response.reduce(\n          (acc, data) => [...acc, ...data.data.results],\n          people\n        );\n        return setAllPeople(people);\n      });\n  }, []);\n\n  //auth\n  useEffect(() => {\n    const unsubscribe = auth.onAuthStateChanged((authUser) => {\n      if (authUser) {\n        setUser(authUser);\n        setLoggedIn(true);\n      } else {\n        setUser(\"\");\n        setLoggedIn(false);\n      }\n    });\n    return () => {\n      unsubscribe();\n    };\n  }, [user]);\n\n  return (\n    <>\n      <GlobalStyles />\n      <div className=\"App\">\n        <Container>\n          <Wrapper>\n            <Nav loggedIn={loggedIn} user={user} />\n            <Search allPeople={allPeople} loggedIn={loggedIn} user={user} />\n          </Wrapper>\n        </Container>\n      </div>\n    </>\n  );\n}\n\nconst Container = styled.div`\n  width: 100%;\n  background-color: black;\n`;\n\nconst Wrapper = styled.div`\n  max-width: 1200px;\n  margin: auto;\n  padding: 16px 32px;\n  background-image: url(\"/images/background.jpg\");\n  min-height: 100vh;\n`;\nexport default App;\n","/Users/vadykk/Desktop/edu/swapi/src/api.js",[],"/Users/vadykk/Desktop/edu/swapi/src/components/PersonCard.js",["49"],"/Users/vadykk/Desktop/edu/swapi/src/firebase.js",[],"/Users/vadykk/Desktop/edu/swapi/src/components/Search.js",["50"],"import React, { useState, useEffect } from \"react\";\nimport PersonCard from \"./PersonCard\";\nimport Heroes from \"./MyHeroes\";\n\nimport { search_url } from \"../api\";\n\nimport CloseRoundedIcon from \"@material-ui/icons/CloseRounded\";\n\nimport axios from \"axios\";\nimport styled from \"styled-components\";\nimport uuid from \"react-uuid\";\nimport firebase from \"firebase\";\nimport { db } from \"../firebase\";\n\nconst Search = ({ allPeople, loggedIn, user }) => {\n  const [input, setInput] = useState(\"\");\n  const [suggestions, setSuggestions] = useState(\"\");\n  const [person, setPerson] = useState(\"\");\n  const [openMyHeroes, setOpenMyHeroes] = useState(false);\n  const [myHeroesList, setMyHeroesList] = useState([]);\n\n  useEffect(() => {\n    user &&\n      db\n        .collection(\"swapi\")\n        .where(\"user\", \"==\", user?.displayName)\n        .onSnapshot((s) => setMyHeroesList(s.docs.map((d) => d.data().liked)));\n  }, [user]);\n\n  const handleInput = (e) => {\n    const value = e.target.value || \"\";\n    setInput(value);\n\n    if (allPeople && value?.length > 1) {\n      const regex = new RegExp(`${value}`, \"i\");\n\n      setSuggestions(\n        allPeople\n          .map((person) => person.name)\n          .sort()\n          .filter((el) => regex.test(el))\n      );\n    } else if (value.length === 0) {\n      setSuggestions(null);\n      setPerson(\"\");\n    }\n  };\n\n  const handleName = (e) => {\n    const name = e.target.innerText || \"\";\n    console.log(name);\n    setInput(name);\n    setSuggestions(\"\");\n    if (allPeople) {\n      for (let i = 0; i < allPeople.length; i++) {\n        if (allPeople[i][\"name\"] === name) {\n          setPerson(allPeople[i]);\n        }\n      }\n    } else console.log(\"not scanned\");\n  };\n\n  const handleClear = () => {\n    setInput(\"\");\n    setPerson(\"\");\n    setSuggestions(\"\");\n  };\n\n  const submitSearch = (e) => {\n    e.preventDefault();\n    axios\n      .get(search_url(input))\n      .then((data) => {\n        function sort(a, b) {\n          if (a.name < b.name) {\n            return -1;\n          }\n          if (a.name > b.name) {\n            return 1;\n          }\n          return 0;\n        }\n        const sortedArray = data.data.results.sort(sort);\n        setPerson(sortedArray[0]);\n      })\n      .catch((error) => alert(error));\n    setSuggestions(null);\n  };\n\n  const handleRemoveHero = (hero) => {\n    db.collection(\"swapi\")\n      .where(\"user\", \"==\", user?.displayName)\n      .where(\"liked\", \"==\", hero)\n      .get()\n      .then((data) => {\n        const id = data.docs[0].id;\n        db.collection(\"swapi\").doc(id).delete();\n      });\n  };\n\n  return (\n    <>\n      <StyledSearch>\n        <StyledForm onSubmit={submitSearch}>\n          <input\n            // key={uuid()}\n            type=\"text\"\n            onChange={handleInput}\n            value={input}\n            placeholder={\"search\"}\n          />\n          {input && (\n            <Cancel>\n              <CloseRoundedIcon onClick={handleClear} />\n            </Cancel>\n          )}\n        </StyledForm>\n\n        {/* AutoComplete */}\n        {suggestions && (\n          <Suggestions>\n            {suggestions.map((e) => (\n              <p onClick={handleName} key={uuid()}>\n                {e}\n              </p>\n            ))}\n          </Suggestions>\n        )}\n        <PersonCard\n          loggedIn={loggedIn}\n          handleClear={handleClear}\n          person={person}\n          suggestions={suggestions}\n          user={user}\n        />\n      </StyledSearch>\n      {loggedIn && !person && (\n        <Heroes\n          handleName={handleName}\n          myHeroesList={myHeroesList}\n          openMyHeroes={openMyHeroes}\n          setOpenMyHeroes={setOpenMyHeroes}\n          handleRemoveHero={handleRemoveHero}\n        />\n      )}\n    </>\n  );\n};\n\nconst StyledForm = styled.form`\n  display: flex;\n  overflow: hidden;\n  margin: 0 auto;\n  background-color: white;\n  max-width: 25rem;\n  width: auto;\n  border-radius: 5rem;\n  position: relative;\n\n  input {\n    padding-left: 1rem;\n    font-size: 1.3rem;\n    height: 3.2rem;\n    border: none;\n    width: 90%;\n    &::placeholder {\n      font-size: 0.3;\n    }\n  }\n`;\n\nconst Cancel = styled.div`\n  color: darkgray;\n  width: 10%;\n  position: absolute;\n  top: 50%;\n  right: 0.2rem;\n  transform: translateY(-50%);\n\n  &:hover {\n    color: black;\n    transition: 0.25s;\n  }\n`;\nconst StyledSearch = styled.div``;\n\nconst Suggestions = styled.div`\n  margin: 5% auto;\n  line-height: 2.5rem;\n  cursor: pointer;\n\n  p {\n    &:hover {\n      color: red;\n    }\n  }\n`;\n\nexport default Search;\n","/Users/vadykk/Desktop/edu/swapi/src/components/Nav.js",["51","52","53","54","55"],"import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport StyledFirebaseAuth from \"react-firebaseui/StyledFirebaseAuth\";\nimport firebase from \"firebase\";\n\nconst Nav = ({ loggedIn, user }) => {\n  const [open, setOpen] = useState(false);\n\n  const uiConfig = {\n    // Popup signin flow rather than redirect flow.\n    signInFlow: \"popup\",\n    // Redirect to /signedIn after sign in is successful. Alternatively you can provide a callbacks.signInSuccess function.\n    signInSuccessUrl: \"/signedIn\",\n    // We will display Google and Facebook as auth providers.\n    signInOptions: [firebase.auth.FacebookAuthProvider.PROVIDER_ID],\n  };\n\n  const handleLogin = () => {\n    // Sign in using a popup.\n    var provider = new firebase.auth.FacebookAuthProvider();\n    provider.addScope(\"user_birthday\");\n    // provider.setCustomParameters({ auth_type: \"reauthenticate\" });\n    firebase\n      .auth()\n      .signInWithPopup(provider)\n      .then(function (result) {\n        // This gives you a Facebook Access Token.\n        var token = result.credential.accessToken;\n        // The signed-in user info.\n        var user = result.user;\n      });\n  };\n\n  const handleLogout = () => {\n    firebase\n      .auth()\n      .signOut()\n      .catch((error) => console.log(error));\n  };\n\n  return (\n    <NavBar>\n      {loggedIn ? (\n        <>\n          <Login onClick={handleLogout}>Logout</Login>\n          <div onClick={() => setOpen(true)} className=\"logged-in-btn\">\n            {user.displayName}\n          </div>\n        </>\n      ) : (\n        // <Login onClick={() => setOpen(true)}> Login</Login>\n        <Login onClick={handleLogin}>Login with FB</Login>\n      )}\n    </NavBar>\n  );\n};\n\nconst NavBar = styled.nav`\n  width: 100%;\n  height: 3rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  .logged-in-btn {\n    &:hover {\n      color: none;\n    }\n  }\n`;\n\nconst Login = styled.div`\n  text-transform: uppercase;\n  cursor: pointer;\n  &:hover {\n    color: red;\n  }\n`;\n\nexport default Nav;\n","/Users/vadykk/Desktop/edu/swapi/src/components/GlobalStyles.js",[],"/Users/vadykk/Desktop/edu/swapi/src/components/MyHeroes.js",[],{"ruleId":"56","replacedBy":"57"},{"ruleId":"58","replacedBy":"59"},{"ruleId":"60","severity":1,"message":"61","line":11,"column":8,"nodeType":"62","messageId":"63","endLine":11,"endColumn":16},{"ruleId":"64","severity":1,"message":"65","line":27,"column":33,"nodeType":"66","messageId":"67","endLine":27,"endColumn":35},{"ruleId":"60","severity":1,"message":"61","line":12,"column":8,"nodeType":"62","messageId":"63","endLine":12,"endColumn":16},{"ruleId":"60","severity":1,"message":"68","line":3,"column":8,"nodeType":"62","messageId":"63","endLine":3,"endColumn":26},{"ruleId":"60","severity":1,"message":"69","line":7,"column":10,"nodeType":"62","messageId":"63","endLine":7,"endColumn":14},{"ruleId":"60","severity":1,"message":"70","line":9,"column":9,"nodeType":"62","messageId":"63","endLine":9,"endColumn":17},{"ruleId":"60","severity":1,"message":"71","line":28,"column":13,"nodeType":"62","messageId":"63","endLine":28,"endColumn":18},{"ruleId":"60","severity":1,"message":"72","line":30,"column":13,"nodeType":"62","messageId":"63","endLine":30,"endColumn":17},"no-native-reassign",["73"],"no-negated-in-lhs",["74"],"no-unused-vars","'firebase' is defined but never used.","Identifier","unusedVar","array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside","'StyledFirebaseAuth' is defined but never used.","'open' is assigned a value but never used.","'uiConfig' is assigned a value but never used.","'token' is assigned a value but never used.","'user' is assigned a value but never used.","no-global-assign","no-unsafe-negation"]